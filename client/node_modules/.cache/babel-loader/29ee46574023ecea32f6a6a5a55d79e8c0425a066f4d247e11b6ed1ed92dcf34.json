{"ast":null,"code":"import React,{useEffect,useState}from'react';import axios from'axios';import{API_BASE_URL}from'../config';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function UserDashboard(){const[appointments,setAppointments]=useState([]);const[doctors,setDoctors]=useState([]);const[form,setForm]=useState({doctor:'',appointmentDate:'',appointmentTime:'',symptoms:''});const[loading,setLoading]=useState(true);const[error,setError]=useState('');useEffect(()=>{const fetchData=async()=>{try{const token=localStorage.getItem('token');const apptRes=await axios.get(`${API_BASE_URL}/api/appointments`,{headers:{Authorization:`Bearer ${token}`}});const docRes=await axios.get(`${API_BASE_URL}/api/doctors`);setAppointments(apptRes.data);setDoctors(docRes.data);}catch(err){setError('Failed to fetch user data');}finally{setLoading(false);}};fetchData();},[]);const handleChange=e=>setForm({...form,[e.target.name]:e.target.value});const handleSubmit=async e=>{e.preventDefault();try{const token=localStorage.getItem('token');await axios.post(`${API_BASE_URL}/api/appointments`,form,{headers:{Authorization:`Bearer ${token}`}});window.location.reload();}catch(err){setError('Failed to book appointment');}};if(loading)return/*#__PURE__*/_jsx(\"div\",{children:\"Loading user dashboard...\"});if(error)return/*#__PURE__*/_jsx(\"div\",{className:\"error\",children:error});return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"User Dashboard\"}),/*#__PURE__*/_jsx(\"h3\",{children:\"Book Appointment\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"select\",{name:\"doctor\",value:form.doctor,onChange:handleChange,required:true,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select Doctor\"}),doctors.map(doc=>/*#__PURE__*/_jsxs(\"option\",{value:doc._id,children:[doc.name,\" (\",doc.specialization,\")\"]},doc._id))]}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",name:\"appointmentDate\",value:form.appointmentDate,onChange:handleChange,required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"time\",name:\"appointmentTime\",value:form.appointmentTime,onChange:handleChange,required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"symptoms\",value:form.symptoms,onChange:handleChange,placeholder:\"Symptoms (optional)\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Book\"})]}),/*#__PURE__*/_jsx(\"h3\",{children:\"Your Appointments\"}),/*#__PURE__*/_jsx(\"ul\",{children:appointments.map(appt=>{var _appt$doctor;return/*#__PURE__*/_jsxs(\"li\",{children:[\"With Dr. \",((_appt$doctor=appt.doctor)===null||_appt$doctor===void 0?void 0:_appt$doctor.name)||'Unknown',\" on \",new Date(appt.appointmentDate).toLocaleString(),\" at \",appt.appointmentTime]},appt._id);})})]});}","map":{"version":3,"names":["React","useEffect","useState","axios","API_BASE_URL","jsx","_jsx","jsxs","_jsxs","UserDashboard","appointments","setAppointments","doctors","setDoctors","form","setForm","doctor","appointmentDate","appointmentTime","symptoms","loading","setLoading","error","setError","fetchData","token","localStorage","getItem","apptRes","get","headers","Authorization","docRes","data","err","handleChange","e","target","name","value","handleSubmit","preventDefault","post","window","location","reload","children","className","onSubmit","onChange","required","map","doc","_id","specialization","type","placeholder","appt","_appt$doctor","Date","toLocaleString"],"sources":["C:/Users/munga/OneDrive/Desktop/FULLSTACK/client/src/components/UserDashboard.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport axios from 'axios';\r\nimport { API_BASE_URL } from '../config';\r\n\r\nexport default function UserDashboard() {\r\n  const [appointments, setAppointments] = useState([]);\r\n  const [doctors, setDoctors] = useState([]);\r\n  const [form, setForm] = useState({ doctor: '', appointmentDate: '', appointmentTime: '', symptoms: '' });\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState('');\r\n\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      try {\r\n        const token = localStorage.getItem('token');\r\n        const apptRes = await axios.get(`${API_BASE_URL}/api/appointments`, {\r\n          headers: { Authorization: `Bearer ${token}` }\r\n        });\r\n        const docRes = await axios.get(`${API_BASE_URL}/api/doctors`);\r\n        setAppointments(apptRes.data);\r\n        setDoctors(docRes.data);\r\n      } catch (err) {\r\n        setError('Failed to fetch user data');\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n    fetchData();\r\n  }, []);\r\n\r\n  const handleChange = e => setForm({ ...form, [e.target.name]: e.target.value });\r\n\r\n  const handleSubmit = async e => {\r\n    e.preventDefault();\r\n    try {\r\n      const token = localStorage.getItem('token');\r\n      await axios.post(`${API_BASE_URL}/api/appointments`, form, {\r\n        headers: { Authorization: `Bearer ${token}` }\r\n      });\r\n      window.location.reload();\r\n    } catch (err) {\r\n      setError('Failed to book appointment');\r\n    }\r\n  };\r\n\r\n  if (loading) return <div>Loading user dashboard...</div>;\r\n  if (error) return <div className=\"error\">{error}</div>;\r\n\r\n  return (\r\n    <div>\r\n      <h2>User Dashboard</h2>\r\n      <h3>Book Appointment</h3>\r\n      <form onSubmit={handleSubmit}>\r\n        <select name=\"doctor\" value={form.doctor} onChange={handleChange} required>\r\n          <option value=\"\">Select Doctor</option>\r\n          {doctors.map(doc => (\r\n            <option key={doc._id} value={doc._id}>{doc.name} ({doc.specialization})</option>\r\n          ))}\r\n        </select>\r\n        <input type=\"date\" name=\"appointmentDate\" value={form.appointmentDate} onChange={handleChange} required />\r\n        <input type=\"time\" name=\"appointmentTime\" value={form.appointmentTime} onChange={handleChange} required />\r\n        <input type=\"text\" name=\"symptoms\" value={form.symptoms} onChange={handleChange} placeholder=\"Symptoms (optional)\" />\r\n        <button type=\"submit\">Book</button>\r\n      </form>\r\n      <h3>Your Appointments</h3>\r\n      <ul>\r\n        {appointments.map(appt => (\r\n          <li key={appt._id}>\r\n            With Dr. {appt.doctor?.name || 'Unknown'} on {new Date(appt.appointmentDate).toLocaleString()} at {appt.appointmentTime}\r\n          </li>\r\n        ))}\r\n      </ul>\r\n    </div>\r\n  );\r\n} "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}