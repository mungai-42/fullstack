{"ast":null,"code":"import React,{useState,useEffect}from'react';import{FaPlus,FaEdit,FaTrash,FaSearch}from'react-icons/fa';import axios from'axios';import PatientModal from'./PatientModal';import{API_BASE_URL}from'../config';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Patients=()=>{const[patients,setPatients]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const[showModal,setShowModal]=useState(false);const[editingPatient,setEditingPatient]=useState(null);const[searchTerm,setSearchTerm]=useState('');useEffect(()=>{fetchPatients();},[]);const fetchPatients=async()=>{try{setLoading(true);const response=await axios.get(`${API_BASE_URL}/api/patients`);setPatients(response.data);}catch(err){setError('Failed to load patients');console.error('Patients error:',err);}finally{setLoading(false);}};const handleAddPatient=async patientData=>{try{await axios.post(`${API_BASE_URL}/api/patients`,patientData);fetchPatients();setShowModal(false);}catch(err){setError('Failed to add patient');console.error('Add patient error:',err);}};const handleEditPatient=async patientData=>{try{await axios.put(`${API_BASE_URL}/api/patients/${editingPatient._id}`,patientData);fetchPatients();setShowModal(false);setEditingPatient(null);}catch(err){setError('Failed to update patient');console.error('Update patient error:',err);}};const handleDeletePatient=async id=>{if(window.confirm('Are you sure you want to delete this patient?')){try{await axios.delete(`${API_BASE_URL}/api/patients/${id}`);fetchPatients();}catch(err){setError('Failed to delete patient');console.error('Delete patient error:',err);}}};const openEditModal=patient=>{setEditingPatient(patient);setShowModal(true);};const openAddModal=()=>{setEditingPatient(null);setShowModal(true);};const filteredPatients=patients.filter(patient=>patient.name.toLowerCase().includes(searchTerm.toLowerCase())||patient.email.toLowerCase().includes(searchTerm.toLowerCase())||patient.phone.includes(searchTerm));if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"loading\",children:\"Loading patients...\"});}return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"page-header\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"page-title\",children:\"Patient Management\"}),/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-primary\",onClick:openAddModal,children:[/*#__PURE__*/_jsx(FaPlus,{style:{marginRight:'5px'}}),\"Add Patient\"]})]}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"error\",children:error}),/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"div\",{style:{marginBottom:'20px'},children:/*#__PURE__*/_jsxs(\"div\",{style:{position:'relative'},children:[/*#__PURE__*/_jsx(FaSearch,{style:{position:'absolute',left:'10px',top:'50%',transform:'translateY(-50%)',color:'#666'}}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Search patients...\",value:searchTerm,onChange:e=>setSearchTerm(e.target.value),style:{paddingLeft:'35px'},className:\"form-group input\"})]})}),/*#__PURE__*/_jsxs(\"table\",{className:\"table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Email\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Phone\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Age\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Gender\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:filteredPatients.map(patient=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:patient.name}),/*#__PURE__*/_jsx(\"td\",{children:patient.email}),/*#__PURE__*/_jsx(\"td\",{children:patient.phone}),/*#__PURE__*/_jsx(\"td\",{children:patient.age}),/*#__PURE__*/_jsx(\"td\",{children:patient.gender}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-secondary\",style:{marginRight:'5px'},onClick:()=>openEditModal(patient),children:/*#__PURE__*/_jsx(FaEdit,{})}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-danger\",onClick:()=>handleDeletePatient(patient._id),children:/*#__PURE__*/_jsx(FaTrash,{})})]})]},patient._id))})]}),filteredPatients.length===0&&/*#__PURE__*/_jsx(\"p\",{style:{textAlign:'center',padding:'20px',color:'#666'},children:searchTerm?'No patients found matching your search.':'No patients found.'})]}),showModal&&/*#__PURE__*/_jsx(PatientModal,{patient:editingPatient,onSave:editingPatient?handleEditPatient:handleAddPatient,onClose:()=>{setShowModal(false);setEditingPatient(null);}})]});};export default Patients;","map":{"version":3,"names":["React","useState","useEffect","FaPlus","FaEdit","FaTrash","FaSearch","axios","PatientModal","API_BASE_URL","jsx","_jsx","jsxs","_jsxs","Patients","patients","setPatients","loading","setLoading","error","setError","showModal","setShowModal","editingPatient","setEditingPatient","searchTerm","setSearchTerm","fetchPatients","response","get","data","err","console","handleAddPatient","patientData","post","handleEditPatient","put","_id","handleDeletePatient","id","window","confirm","delete","openEditModal","patient","openAddModal","filteredPatients","filter","name","toLowerCase","includes","email","phone","className","children","onClick","style","marginRight","marginBottom","position","left","top","transform","color","type","placeholder","value","onChange","e","target","paddingLeft","map","age","gender","length","textAlign","padding","onSave","onClose"],"sources":["/workspace/client/src/components/Patients.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { FaPlus, FaEdit, FaTrash, FaSearch } from 'react-icons/fa';\nimport axios from 'axios';\nimport PatientModal from './PatientModal';\nimport { API_BASE_URL } from '../config';\n\nconst Patients = () => {\n  const [patients, setPatients] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [showModal, setShowModal] = useState(false);\n  const [editingPatient, setEditingPatient] = useState(null);\n  const [searchTerm, setSearchTerm] = useState('');\n\n  useEffect(() => {\n    fetchPatients();\n  }, []);\n\n  const fetchPatients = async () => {\n    try {\n      setLoading(true);\n      const response = await axios.get(`${API_BASE_URL}/api/patients`);\n      setPatients(response.data);\n    } catch (err) {\n      setError('Failed to load patients');\n      console.error('Patients error:', err);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleAddPatient = async (patientData) => {\n    try {\n      await axios.post(`${API_BASE_URL}/api/patients`, patientData);\n      fetchPatients();\n      setShowModal(false);\n    } catch (err) {\n      setError('Failed to add patient');\n      console.error('Add patient error:', err);\n    }\n  };\n\n  const handleEditPatient = async (patientData) => {\n    try {\n              await axios.put(`${API_BASE_URL}/api/patients/${editingPatient._id}`, patientData);\n      fetchPatients();\n      setShowModal(false);\n      setEditingPatient(null);\n    } catch (err) {\n      setError('Failed to update patient');\n      console.error('Update patient error:', err);\n    }\n  };\n\n  const handleDeletePatient = async (id) => {\n    if (window.confirm('Are you sure you want to delete this patient?')) {\n      try {\n        await axios.delete(`${API_BASE_URL}/api/patients/${id}`);\n        fetchPatients();\n      } catch (err) {\n        setError('Failed to delete patient');\n        console.error('Delete patient error:', err);\n      }\n    }\n  };\n\n  const openEditModal = (patient) => {\n    setEditingPatient(patient);\n    setShowModal(true);\n  };\n\n  const openAddModal = () => {\n    setEditingPatient(null);\n    setShowModal(true);\n  };\n\n  const filteredPatients = patients.filter(patient =>\n    patient.name.toLowerCase().includes(searchTerm.toLowerCase()) ||\n    patient.email.toLowerCase().includes(searchTerm.toLowerCase()) ||\n    patient.phone.includes(searchTerm)\n  );\n\n  if (loading) {\n    return <div className=\"loading\">Loading patients...</div>;\n  }\n\n  return (\n    <div>\n      <div className=\"page-header\">\n        <h1 className=\"page-title\">Patient Management</h1>\n        <button className=\"btn btn-primary\" onClick={openAddModal}>\n          <FaPlus style={{ marginRight: '5px' }} />\n          Add Patient\n        </button>\n      </div>\n\n      {error && <div className=\"error\">{error}</div>}\n\n      <div className=\"card\">\n        <div style={{ marginBottom: '20px' }}>\n          <div style={{ position: 'relative' }}>\n            <FaSearch style={{ position: 'absolute', left: '10px', top: '50%', transform: 'translateY(-50%)', color: '#666' }} />\n            <input\n              type=\"text\"\n              placeholder=\"Search patients...\"\n              value={searchTerm}\n              onChange={(e) => setSearchTerm(e.target.value)}\n              style={{ paddingLeft: '35px' }}\n              className=\"form-group input\"\n            />\n          </div>\n        </div>\n\n        <table className=\"table\">\n          <thead>\n            <tr>\n              <th>Name</th>\n              <th>Email</th>\n              <th>Phone</th>\n              <th>Age</th>\n              <th>Gender</th>\n              <th>Actions</th>\n            </tr>\n          </thead>\n          <tbody>\n            {filteredPatients.map((patient) => (\n              <tr key={patient._id}>\n                <td>{patient.name}</td>\n                <td>{patient.email}</td>\n                <td>{patient.phone}</td>\n                <td>{patient.age}</td>\n                <td>{patient.gender}</td>\n                <td>\n                  <button\n                    className=\"btn btn-secondary\"\n                    style={{ marginRight: '5px' }}\n                    onClick={() => openEditModal(patient)}\n                  >\n                    <FaEdit />\n                  </button>\n                  <button\n                    className=\"btn btn-danger\"\n                    onClick={() => handleDeletePatient(patient._id)}\n                  >\n                    <FaTrash />\n                  </button>\n                </td>\n              </tr>\n            ))}\n          </tbody>\n        </table>\n\n        {filteredPatients.length === 0 && (\n          <p style={{ textAlign: 'center', padding: '20px', color: '#666' }}>\n            {searchTerm ? 'No patients found matching your search.' : 'No patients found.'}\n          </p>\n        )}\n      </div>\n\n      {showModal && (\n        <PatientModal\n          patient={editingPatient}\n          onSave={editingPatient ? handleEditPatient : handleAddPatient}\n          onClose={() => {\n            setShowModal(false);\n            setEditingPatient(null);\n          }}\n        />\n      )}\n    </div>\n  );\n};\n\nexport default Patients; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}